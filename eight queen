
//8皇后递归解法---C语言
/*********************************
x[i]的值表示为第i行中皇后所占据的列编号。如x[2]=6--表示第2行中皇后位于第6列。
上对角线↗每一方格其行号与列号之差i-j为一常量；下对角线↙i+j为一常量；
列数组a,a[k]为“1”时表示k列无皇后；
上对角线数组b，b[k]为“1”时表示第k-7个上对角线无皇后；
下对角线数组c,c[k]为“1”表示第K个下对角线无皇后；
这样方格[i,j]是安全的就意味着布尔表达式：a[j]&&b[7+(i-j)]&&c[i+j] 为真。
**********************************/
#include <stdio.h>
#include <stdlib.h>
int a[8],b[15],c[15],x[8];
void print()
{
    int i=0;
    for(i=0;i<=7;i++)
        printf("(%d,%d)",i,x[i]);
    printf("\n");
}
void try1(int i)
{
    int j;
    for(j=0;j<=7;j++)
    {
        if(a[j]&&b[7+(i-j)]&&c[i+j])
        {
            x[i]=j;
            a[j]=0;
            b[7+(i-j)]=0;
            c[i+j]=0;
            if(i<7)
                try1(i+1);
            else
                print();
            a[j]=1;
            b[7+(i-j)]=1;
            c[i+j]=1;
        }
    }
}
int main()
{
    int i;
    for(i=0;i<=7;i++)
        a[i]=1;
    for(i=0;i<=14;i++)
        b[i]=c[i]=1;
    try1(0);
    return 0;
}
/*---8皇后非递归的一种解法---*/
/*****************************************************
j!=x[k]表示当前列号j不与第k行皇后发生列的冲突
i+j!=k+x[k]  不发生下对角线的冲突
i-j!=k-x[k]  不发生上对角线的冲突
k<i 表示对已经放置在0~i-1行上的皇后进行不冲突条件的检查。
******************************************************/
int main()
{
    int i,j,k,safe,x[8];
    i=0;
    j=-1;
    while(i>=0)
    {
        safe=0;
        while((j<7)&&(!safe))
        {
            j++;
            k=0;
            while((k<i)&&(j!=x[k])&&((i+j)!=(k+x[k]))&&((i-j)!=(k-x[k])))
                k++;
            if(i==k)
                safe=1;
        }
        if(safe)
        {
            x[i]=j;
            if(i==7)
            {
                for(i=0;i<=7;i++)
                    printf("(%d,%d),",i,x[i]);
                printf("\n");
            }
            else
            {
                i++;
                j=-1;
            }
        }
        else
        {
            i--;
            if(i>=0)
                j=x[i];
        }
    }
    return 0;
}
